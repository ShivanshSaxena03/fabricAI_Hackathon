
<!DOCTYPE html>
<html>
<head><title>FabricMind AI - Outfit Generator</title>   
<meta charset="UTF-8">

<script src="https://cdn.tailwindcss.com"></script>

<!-- ✅ Added Markdown Library -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

<style>
body{
font-family:'Inter',sans-serif;
}

.card{
transition:all .4s ease;
}

.card:hover{
transform:translateY(-8px);
box-shadow:0 25px 50px rgba(0,0,0,.08);
}

.input-field{
transition:.3s;
}

.input-field:focus{
outline:none;
border-color:#3A5A6A;
box-shadow:0 0 0 3px rgba(58,90,106,.2);
}

.loader{
border:4px solid #f3f3f3;
border-top:4px solid #3A5A6A;
border-radius:50%;
width:30px;
height:30px;
animation:spin 1s linear infinite;
}

@keyframes spin{
0%{transform:rotate(0deg);}
100%{transform:rotate(360deg);}
}

/* ✅ Added Markdown Styling */
#result h1, #result h2, #result h3 {
    font-family: 'Playfair Display', serif;
    margin-top: 20px;
    margin-bottom: 10px;
}

#result h3 {
    font-size: 20px;
    font-weight: 600;
}

#result p {
    margin-bottom: 10px;
}

#result ul {
    margin-left: 20px;
    list-style-type: disc;
    margin-bottom: 10px;
}

#result strong {
    font-weight: 600;
}
</style>

</head>

<body class="flex bg-[#F1F5F9]">

<!-- SIDEBAR -->
<div class="w-64 bg-[#2F3E46] text-white h-screen p-8 flex flex-col shadow-xl">

<h2 class="text-3xl font-['Playfair_Display'] mb-12 tracking-wide">
FabricMind AI
</h2>

<nav class="space-y-6 text-sm tracking-wide">

<a href="#" class="block font-semibold text-gray-300">
Outfit Generator
</a>

<a href="inventory.html" class="block hover:translate-x-2 transition">
Inventory
</a>

<a href="sql.html" class="block hover:translate-x-2 transition">
SQL Intelligence
</a>

<a href="chat.html" class="block hover:translate-x-2 transition">
AI Copilot
</a>

</nav>

</div>

<!-- MAIN -->
<div class="flex-1 p-16">

<h1 class="text-5xl font-['Playfair_Display'] text-[#1E293B] mb-12">
Outfit Generator
</h1>

<div class="card bg-white rounded-3xl p-12 shadow-md max-w-xl">

<!-- INPUTS -->
<div class="space-y-6">

<input id="fabric" placeholder="Fabric (example: cotton)" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<input id="color" placeholder="Color (example: navy)" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<input id="occasion" placeholder="Occasion (example: wedding)" class="input-field w-full border border-gray-300 p-3 rounded-xl">

<select id="gender" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<option value="">Select Gender</option>
<option>Male</option>
<option>Female</option>
<option>Unisex</option>
</select>

<select id="body_type" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<option value="">Body Type</option>
<option>Slim</option>
<option>Athletic</option>
<option>Average</option>
<option>Heavy</option>
</select>

<select id="season" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<option value="">Season</option>
<option>Summer</option>
<option>Winter</option>
<option>Spring</option>
<option>Autumn</option>
<option>All Season</option>
</select>

<select id="style" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<option value="">Style Preference</option>
<option>Minimalist</option>
<option>Formal</option>
<option>Casual</option>
<option>Luxury</option>
<option>Streetwear</option>
<option>Traditional</option>
</select>

<select id="fit" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<option value="">Fit Preference</option>
<option>Slim Fit</option>
<option>Regular Fit</option>
<option>Loose Fit</option>
<option>Oversized</option>
</select>

<input id="climate" placeholder="Climate (example: hot, cold, humid)" class="input-field w-full border border-gray-300 p-3 rounded-xl">
<input id="culture" placeholder="Cultural Preference (example: Indian, Western, Indo-Western)" class="input-field w-full border border-gray-300 p-3 rounded-xl">

<button onclick="generateOutfit()" class="w-full bg-[#3A5A6A] text-white py-3 rounded-full hover:bg-[#1E293B] transition">
Generate Outfit
</button>

</div>

<!-- LOADER -->
<div id="loader" class="hidden mt-6 flex justify-center">
<div class="loader"></div>
</div>

<!-- RESULT -->
<div id="result" class="mt-8 text-[#1E293B] leading-relaxed space-y-4"></div>

<!-- IMAGE -->
<img id="image" class="mt-6 rounded-xl shadow-md hidden">

</div>
</div>

<script>
async function generateOutfit(){

    const fabric = document.getElementById("fabric").value
    const color = document.getElementById("color").value
    const occasion = document.getElementById("occasion").value
    const gender = document.getElementById("gender").value
    const body_type = document.getElementById("body_type").value
    const season = document.getElementById("season").value
    const style = document.getElementById("style").value
    const fit = document.getElementById("fit").value
    const climate = document.getElementById("climate").value
    const culture = document.getElementById("culture").value

    const resultDiv = document.getElementById("result")
    const image = document.getElementById("image")
    const loader = document.getElementById("loader")

    resultDiv.innerHTML = ""
    image.style.display = "none"
    loader.style.display = "flex"

    try {
        const response = await fetch("http://127.0.0.1:8000/generate-outfit", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                fabric, color, occasion, gender,
                body_type, season, style, fit,
                climate, culture
            })
        })

        if (!response.ok) {
            const errorData = await response.json()
            throw new Error(errorData.error || "Server error")
        }

        const data = await response.json()

        /* ✅ Markdown Rendering Added */
        resultDiv.innerHTML = marked.parse(data.outfit_recommendations)

        if (data.image_url) {
            image.src = data.image_url
            image.style.display = "block"
        }

    } catch (error) {
        resultDiv.innerHTML = "<p class='text-red-500'>Error generating outfit: " + error.message + "</p>"
    } finally {
        loader.style.display = "none"
    }
}
</script>

</body>
</html>